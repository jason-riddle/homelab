---
all:
  hosts:
    ha:
      ansible_host: 192.168.1.170
      ansible_port: 22
      ansible_user: pi

    macmini:
      ansible_connection: local

    pinode01:
      ansible_host: 192.168.1.170
      ansible_port: 22
      ansible_user: pi

  children:
    k8s_control_plane:
      hosts:
        macmini:
    pi_cluster:
      hosts:
        pinode01:
      vars:
        tailscale_up_node: true
        tailscale_up_authkey: "{{ lookup('env', 'TAILSCALE_AUTHKEY', default=undef()) }}"
        tailscale_up_extra_args: "--accept-routes"
        tailscale_up_no_log: false
